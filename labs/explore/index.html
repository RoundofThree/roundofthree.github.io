<!DOCTYPE html>
<html lang="en">
<head>
<title>Explore - HackTheBox machine :: RoundofThree</title>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content=" Rank: easy " name="description"/>
<meta content="[hacking kaggle blog resume hackthebox machine-learning reverse-engineering infosec]" name="keywords"/>
<meta content="noodp" name="robots"/>
<link href="/labs/explore/" rel="canonical"/>
<link href="/assets/style.css" rel="stylesheet"/>
<link href="/img/apple-touch-icon-192x192.png" rel="apple-touch-icon"/>
<link href="/favicon.png" rel="shortcut icon"/>
<meta content="summary" name="twitter:card"/>
<meta content="" name="twitter:site"/>
<meta content="RoundofThree" name="twitter:creator"/>
<meta content="en" property="og:locale"/>
<meta content="article" property="og:type"/>
<meta content="Explore - HackTheBox machine" property="og:title"/>
<meta content=" Rank: easy " property="og:description"/>
<meta content="/labs/explore/" property="og:url"/>
<meta content="RoundofThree" property="og:site_name"/>
<meta content="/favicon.png" property="og:image"/>
<meta content="2048" property="og:image:width"/>
<meta content="1024" property="og:image:height"/>
<meta content="2021-09-07 13:19:14 +0200 +0200" property="article:published_time"/>
</head>
<body class="orange">
<div class="container center headings--one-size">
<header class="header">
<div class="header__inner">
<div class="header__logo">
<a href="/">
<div class="logo">
    RoundofThree
  </div>
</a>
</div>
<div class="menu-trigger">menu</div>
</div>
<nav class="menu">
<ul class="menu__inner menu__inner--desktop">
<li><a href="/general">General</a></li>
<li><a href="/labs">Labs</a></li>
<li><a href="/research">Research</a></li>
<li><a href="/">Whoami</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href="/general">General</a></li>
<li><a href="/labs">Labs</a></li>
<li><a href="/research">Research</a></li>
<li><a href="/">Whoami</a></li>
</ul>
</nav>
</header>
<form action="/search/" id="search" method="get">
<label for="search-input" hidden="">Search site</label>
<input id="search-input" name="query" placeholder="Type here to search" type="text"/>
<input type="submit" value="search"/>
</form>
<div class="content">
<div class="post">
<h1 class="post-title">
<a href="/labs/explore/">Explore - HackTheBox machine</a></h1>
<div class="post-meta">
<span class="post-date">
        2021-09-07 
      </span>
<span class="post-author">:: RoundofThree</span>
</div>
<span class="post-tags">
    
    #<a href="/tags/hackthebox/">HackTheBox</a> 
    
  </span>
<div class="post-content"><div>
<ul>
<li>Rank: easy</li>
</ul>
<h2 id="foothold">Foothold<a arialabel="Anchor" class="hanchor" href="#foothold">⌗</a> </h2>
<p>1- Nmap for all ports.</p>
<pre tabindex="0"><code># Nmap 7.91 scan initiated Tue Jul 20 07:48:06 2021 as: nmap -sC -sV -p- -oA nmap target
Nmap scan report for target (10.10.10.247)
Host is up (0.061s latency).
Not shown: 65530 closed ports
PORT      STATE    SERVICE VERSION
2222/tcp  open     ssh     (protocol 2.0)
| fingerprint-strings: 
|   NULL: 
|_    SSH-2.0-SSH Server - Banana Studio
| ssh-hostkey: 
|_  2048 71:90:e3:a7:c9:5d:83:66:34:88:3d:eb:b4:c7:88:fb (RSA)
5555/tcp  filtered freeciv
38595/tcp open     unknown
| fingerprint-strings: 
|   GenericLines: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:44:55 GMT
|     Content-Length: 22
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Invalid request line:
|   GetRequest: 
|     HTTP/1.1 412 Precondition Failed
|     Date: Tue, 20 Jul 2021 12:44:55 GMT
|     Content-Length: 0
|   HTTPOptions: 
|     HTTP/1.0 501 Not Implemented
|     Date: Tue, 20 Jul 2021 12:45:00 GMT
|     Content-Length: 29
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Method not supported: OPTIONS
|   Help: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:45:16 GMT
|     Content-Length: 26
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Invalid request line: HELP
|   RTSPRequest: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:45:00 GMT
|     Content-Length: 39
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     valid protocol version: RTSP/1.0
|   SSLSessionReq: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:45:16 GMT
|     Content-Length: 73
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Invalid request line: 
|     ?G???,???`~?
|     ??{????w????&lt;=?o?
|   TLSSessionReq: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:45:16 GMT
|     Content-Length: 71
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Invalid request line: 
|     ??random1random2random3random4
|   TerminalServerCookie: 
|     HTTP/1.0 400 Bad Request
|     Date: Tue, 20 Jul 2021 12:45:16 GMT
|     Content-Length: 54
|     Content-Type: text/plain; charset=US-ASCII
|     Connection: Close
|     Invalid request line: 
|_    Cookie: mstshash=nmap
42135/tcp open     http    ES File Explorer Name Response httpd
|_http-title: Site doesn't have a title (text/html).
59777/tcp open     http    Bukkit JSONAPI httpd for Minecraft game server 3.6.0 or older
|_http-title: Site doesn't have a title (text/plain).
</code></pre><p>2- ES File explorer metasploit exploit auxiliary/scanner/http/es_file… to get pictures and look for creds.</p>
<p>3- The creds in creds.jpg is probably the creds for ssh tcp/2222.</p>
<pre tabindex="0"><code>   username: kristi
   password: Kr1sT!5h@Rp3xPl0r3!
</code></pre><h2 id="privilege-escalation">Privilege escalation<a arialabel="Anchor" class="hanchor" href="#privilege-escalation">⌗</a> </h2>
<p>4- tcp 5555 freeciv exploit.
Android Debug Bridge freeciv exploit. This is a python script which is basically the solution: ssh local port forwarding: connect to remote 5555 via 2222 ssh link.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> socket <span style="color:#75715e"># socket</span>
<span style="color:#f92672">import</span> subprocess  <span style="color:#75715e"># Subprocess</span>
<span style="color:#f92672">import</span> pyautogui  <span style="color:#75715e"># PyAutoGui</span>
<span style="color:#f92672">import</span> time  <span style="color:#75715e"># Time</span>


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">connection_function</span>(host, port):
  s <span style="color:#f92672">=</span> socket<span style="color:#f92672">.</span>socket(socket<span style="color:#f92672">.</span>AF_INET, socket<span style="color:#f92672">.</span>SOCK_STREAM)
  s<span style="color:#f92672">.</span>connect((host, port))
  print(s<span style="color:#f92672">.</span>recv(<span style="color:#ae81ff">1024</span>))

connection_function(<span style="color:#e6db74">"10.10.10.247"</span>, <span style="color:#ae81ff">2222</span>)


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">adb_connection</span>(host, port):
  s <span style="color:#f92672">=</span> socket<span style="color:#f92672">.</span>socket(socket<span style="color:#f92672">.</span>AF_INET, socket<span style="color:#f92672">.</span>SOCK_STREAM)
  s<span style="color:#f92672">.</span>connect((host, port))
  print(s<span style="color:#f92672">.</span>recv(<span style="color:#ae81ff">1024</span>))

  subprocess<span style="color:#f92672">.</span>call([<span style="color:#e6db74">'ssh -p 2222 -L 5555:localhost:5555 kristi@target'</span>], shell<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
  password <span style="color:#f92672">=</span> <span style="color:#e6db74">"Kr1sT!5h@Rp3xPl0r3!"</span> <span style="color:#75715e"># this isn't used though</span>
  print(s<span style="color:#f92672">.</span>recv(<span style="color:#ae81ff">1024</span>))
  
adb_connection(<span style="color:#e6db74">"10.10.10.247"</span>, <span style="color:#ae81ff">2222</span>)
</code></pre></div>
</div></div>
</div>
</div>
<footer class="footer">
<div class="footer__inner">
<div class="copyright copyright--user">
<span>© 2021 RoundofThree</span>
</div>
</div>
</footer>
<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>
</div>
</body>
</html>
